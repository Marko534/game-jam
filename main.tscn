[gd_scene load_steps=25 format=4 uid="uid://buaq673iyr04d"]

[ext_resource type="Texture2D" uid="uid://c13eq3dhowyx7" path="res://World/test_wall_no_light.png" id="2_1bvp3"]
[ext_resource type="PackedScene" uid="uid://csi7qcr0jcjm6" path="res://World/light.tscn" id="3_h2yge"]
[ext_resource type="PackedScene" uid="uid://mjw2cea7h0ud" path="res://Player/Player.tscn" id="4_1bvp3"]
[ext_resource type="PackedScene" uid="uid://bc6vcfsfxpa7o" path="res://World/door.tscn" id="4_lquwl"]
[ext_resource type="Texture2D" uid="uid://cpnqxf6hsd8ma" path="res://World/room/normal_room_test.png" id="5_lquwl"]
[ext_resource type="Texture2D" uid="uid://c47hmpldgj212" path="res://World/huge_room_810x2430_template.png" id="6_7mycd"]
[ext_resource type="Texture2D" uid="uid://dll7sxs7nmxmv" path="res://World/outside/pavment.png" id="7_272bh"]

[sub_resource type="PhysicsMaterial" id="PhysicsMaterial_1bvp3"]

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_1bvp3"]
texture = ExtResource("2_1bvp3")
texture_region_size = Vector2i(270, 270)
0:0/size_in_atlas = Vector2i(3, 1)
0:0/0 = 0
0:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-405, 92.8125, 405, 92.8125, 405, 135, -405, 135)
0:0/0/physics_layer_0/polygon_1/points = PackedVector2Array(396.5625, 59.0625, 396.5625, -135, 405, -135, 405, 59.0625)
0:0/0/physics_layer_0/polygon_2/points = PackedVector2Array(-396.5625, -135, -396.5625, 67.5, -405, 67.5, -405, -135)

[sub_resource type="TileSet" id="TileSet_lquwl"]
tile_layout = 1
tile_size = Vector2i(270, 270)
physics_layer_0/collision_layer = 2
physics_layer_0/collision_mask = 2
physics_layer_0/physics_material = SubResource("PhysicsMaterial_1bvp3")
sources/1 = SubResource("TileSetAtlasSource_1bvp3")

[sub_resource type="CircleShape2D" id="CircleShape2D_lquwl"]

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_7mycd"]
texture = ExtResource("5_lquwl")
texture_region_size = Vector2i(270, 270)
0:0/size_in_atlas = Vector2i(3, 1)
0:0/0 = 0
0:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-371.25, -126.5625, -371.25, 92.8125, -405, 92.8125, -405, -126.5625)
0:0/0/physics_layer_0/polygon_1/points = PackedVector2Array(-371.25, 92.8125, -371.25, 135, 405, 135, 405, 92.8125)

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_272bh"]
texture = ExtResource("6_7mycd")
texture_region_size = Vector2i(270, 270)
0:0/size_in_atlas = Vector2i(9, 3)
0:0/0 = 0
0:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-1181.25, 362.8125, -1189.6875, -405, -1215, -405, -1215, 362.8125)

[sub_resource type="TileSet" id="TileSet_272bh"]
tile_size = Vector2i(270, 270)
physics_layer_0/collision_layer = 4
physics_layer_0/collision_mask = 4
sources/0 = SubResource("TileSetAtlasSource_7mycd")
sources/1 = SubResource("TileSetAtlasSource_272bh")

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_5vw27"]
texture = ExtResource("7_272bh")
texture_region_size = Vector2i(270, 270)
0:0/0 = 0

[sub_resource type="TileSetScenesCollectionSource" id="TileSetScenesCollectionSource_272bh"]
scenes/1/scene = ExtResource("4_lquwl")

[sub_resource type="TileSet" id="TileSet_kek77"]
tile_size = Vector2i(270, 270)
sources/0 = SubResource("TileSetAtlasSource_5vw27")
sources/1 = SubResource("TileSetScenesCollectionSource_272bh")

[sub_resource type="Gradient" id="Gradient_5vw27"]
interpolation_mode = 2
offsets = PackedFloat32Array(0.3037215, 1)
colors = PackedColorArray(0.19076231, 0.19076234, 0.19076231, 1, 0.12225223, 0.12225223, 0.12225223, 1)

[sub_resource type="FastNoiseLite" id="FastNoiseLite_kek77"]
noise_type = 0
frequency = 0.15
fractal_type = 2
fractal_octaves = 10

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_4c57u"]
width = 2700
height = 64
noise = SubResource("FastNoiseLite_kek77")
color_ramp = SubResource("Gradient_5vw27")

[sub_resource type="Gradient" id="Gradient_272bh"]
offsets = PackedFloat32Array(0, 0.99881655, 1)
colors = PackedColorArray(0.038397163, 0.038397174, 0.038397145, 1, 0.20152646, 0.20152664, 0.20152646, 1, 0.13682577, 0.13682574, 0.13682571, 1)

[sub_resource type="FastNoiseLite" id="FastNoiseLite_5vw27"]
noise_type = 0
frequency = 0.15
fractal_type = 2

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_kek77"]
width = 2700
height = 8
noise = SubResource("FastNoiseLite_5vw27")
color_ramp = SubResource("Gradient_272bh")
seamless = true

[sub_resource type="WorldBoundaryShape2D" id="WorldBoundaryShape2D_7mycd"]

[node name="Node" type="Node"]

[node name="CanvasModulate" type="CanvasModulate" parent="."]
color = Color(0.24115604, 0.24115604, 0.24115604, 1)

[node name="Player" parent="." instance=ExtResource("4_1bvp3")]
position = Vector2(246, 116)
collision_layer = 2
collision_mask = 2

[node name="Rooms" type="TileMapLayer" parent="."]
z_index = -10
tile_map_data = PackedByteArray("AAAEAAAAAQAAAAAAAAAEAP//AQAAAAAAAAAEAP7/AQAAAAAAAAAEAAEAAQAAAAAAAAABAAEAAQAAAAAAAAABAAAAAQAAAAAAAAABAP//AQAAAAAAAAABAP7/AQAAAAAAAAA=")
tile_set = SubResource("TileSet_lquwl")
metadata/_edit_lock_ = true

[node name="Light" parent="Rooms" instance=ExtResource("3_h2yge")]
position = Vector2(493, -8)
collision_layer = 2
collision_mask = 2

[node name="Roof" type="StaticBody2D" parent="Rooms"]
collision_layer = 2
collision_mask = 2

[node name="CollisionShape2D" type="CollisionShape2D" parent="Rooms/Roof"]
position = Vector2(480, -8)
shape = SubResource("CircleShape2D_lquwl")

[node name="PinJoint2D" type="PinJoint2D" parent="Rooms"]
position = Vector2(480, -8)
node_a = NodePath("../Roof")
node_b = NodePath("../Light")
softness = 5.0

[node name="Door" parent="Rooms" instance=ExtResource("4_lquwl")]
z_index = 3
position = Vector2(483, 134)
collision_layer = 2
collision_mask = 2

[node name="Building hall" type="TileMapLayer" parent="."]
visible = false
z_index = -10
tile_map_data = PackedByteArray("AAABAAAAAAAAAAAAAAABAAEAAAAAAAAAAAAEAAEAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAP//AAAAAAAAAAABAP//AAAAAAAAAAAEAAMAAQAAAAAAAAA=")
tile_set = SubResource("TileSet_272bh")
metadata/_edit_lock_ = true

[node name="Door2" parent="Building hall" instance=ExtResource("4_lquwl")]
z_index = 2
position = Vector2(621, 135)
collision_layer = 4
collision_mask = 4

[node name="Outside" type="TileMapLayer" parent="."]
visible = false
z_index = -5
position = Vector2(0, 48)
tile_map_data = PackedByteArray("AAD/////AAAAAAAAAAAAAP//AAAAAAAAAAD+////AAAAAAAAAAD9////AAAAAAAAAAD8////AAAAAAAAAAADAP//AAAAAAAAAAAEAP//AAAAAAAAAAAFAP//AAAAAAAAAAAGAP//AAAAAAAAAAAHAP//AAAAAAAAAAAIAP//AAAAAAAAAAD7////AAAAAAAAAAACAP//AAAAAAAAAAABAP//AAAAAAAAAAA=")
tile_set = SubResource("TileSet_kek77")
metadata/_edit_lock_ = true

[node name="Sprite2D" type="Sprite2D" parent="Outside"]
position = Vector2(0, -38)
texture = SubResource("NoiseTexture2D_4c57u")

[node name="Sprite2D2" type="Sprite2D" parent="Outside"]
position = Vector2(0, -2)
texture = SubResource("NoiseTexture2D_kek77")

[node name="Floor" type="StaticBody2D" parent="Outside"]
position = Vector2(0, -48)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Outside/Floor"]
shape = SubResource("WorldBoundaryShape2D_7mycd")

[connection signal="body_entered" from="Rooms/Door" to="Player" method="_on_door_body_entered"]
[connection signal="body_exited" from="Rooms/Door" to="Player" method="_on_door_body_exited"]
[connection signal="body_entered" from="Building hall/Door2" to="Player" method="_on_door_2_body_entered"]
[connection signal="body_exited" from="Building hall/Door2" to="Player" method="_on_door_2_body_exited"]
